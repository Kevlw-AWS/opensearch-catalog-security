{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Service-map-graph","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Service-map-graph\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega/v5.json\\\",\\n  \\\"padding\\\": {\\\"left\\\": 0, \\\"right\\\": 0, \\\"top\\\": 0, \\\"bottom\\\": 0},\\n  \\\"autosize\\\": \\\"pad\\\",\\n  \\\"background\\\": \\\"#f4f7ff\\\",\\n  \\\"signals\\\": [\\n    {\\\"name\\\": \\\"xrange\\\", \\\"update\\\": \\\"[0, width]\\\"},\\n    {\\\"name\\\": \\\"yrange\\\", \\\"update\\\": \\\"[height, 0]\\\"},\\n    {\\\"name\\\": \\\"xext\\\", \\\"update\\\": \\\"[0, width]\\\"},\\n    {\\\"name\\\": \\\"yext\\\", \\\"update\\\": \\\"[height, 0]\\\"},\\n    {\\n      \\\"name\\\": \\\"down\\\",\\n      \\\"value\\\": null,\\n      \\\"on\\\": [\\n        {\\\"events\\\": \\\"mouseup,touchend\\\", \\\"update\\\": \\\"null\\\"},\\n        {\\\"events\\\": \\\"mousedown, touchstart\\\", \\\"update\\\": \\\"xy()\\\"},\\n        {\\\"events\\\": \\\"symbol:mousedown, symbol:touchstart\\\", \\\"update\\\": \\\"null\\\"}\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"xcur\\\",\\n      \\\"value\\\": null,\\n      \\\"on\\\": [{\\\"events\\\": \\\"mousedown, touchstart, touchend\\\", \\\"update\\\": \\\"xdom\\\"}]\\n    },\\n    {\\n      \\\"name\\\": \\\"ycur\\\",\\n      \\\"value\\\": null,\\n      \\\"on\\\": [{\\\"events\\\": \\\"mousedown, touchstart, touchend\\\", \\\"update\\\": \\\"ydom\\\"}]\\n    },\\n    {\\n      \\\"name\\\": \\\"delta\\\",\\n      \\\"value\\\": [0, 0],\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": [\\n            {\\n              \\\"source\\\": \\\"window\\\",\\n              \\\"type\\\": \\\"mousemove\\\",\\n              \\\"consume\\\": true,\\n              \\\"between\\\": [\\n                {\\\"type\\\": \\\"mousedown\\\"},\\n                {\\\"source\\\": \\\"window\\\", \\\"type\\\": \\\"mouseup\\\"}\\n              ]\\n            },\\n            {\\n              \\\"type\\\": \\\"touchmove\\\",\\n              \\\"consume\\\": true,\\n              \\\"filter\\\": \\\"event.touches.length === 1\\\"\\n            }\\n          ],\\n          \\\"update\\\": \\\"down ? [down[0]-x(), y()-down[1]] : [0,0]\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"anchor\\\",\\n      \\\"value\\\": [0, 0],\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": \\\"wheel\\\",\\n          \\\"update\\\": \\\"[invert('xscale', x()), invert('yscale', y())]\\\"\\n        },\\n        {\\n          \\\"events\\\": {\\n            \\\"type\\\": \\\"touchstart\\\",\\n            \\\"filter\\\": \\\"event.touches.length===2\\\"\\n          },\\n          \\\"update\\\": \\\"[(xdom[0] + xdom[1]) / 2, (ydom[0] + ydom[1]) / 2]\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"zoom\\\",\\n      \\\"value\\\": 1,\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": \\\"wheel!\\\",\\n          \\\"force\\\": true,\\n          \\\"update\\\": \\\"pow(1.001, event.deltaY * pow(16, event.deltaMode))\\\"\\n        },\\n        {\\n          \\\"events\\\": {\\\"signal\\\": \\\"dist2\\\"},\\n          \\\"force\\\": true,\\n          \\\"update\\\": \\\"dist1 / dist2\\\"\\n        },\\n        {\\\"events\\\": [{\\\"source\\\": \\\"view\\\", \\\"type\\\": \\\"dblclick\\\"}], \\\"update\\\": \\\"1\\\"}\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"dist1\\\",\\n      \\\"value\\\": 0,\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": {\\n            \\\"type\\\": \\\"touchstart\\\",\\n            \\\"filter\\\": \\\"event.touches.length===2\\\"\\n          },\\n          \\\"update\\\": \\\"pinchDistance(event)\\\"\\n        },\\n        {\\\"events\\\": {\\\"signal\\\": \\\"dist2\\\"}, \\\"update\\\": \\\"dist2\\\"}\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"dist2\\\",\\n      \\\"value\\\": 0,\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": {\\n            \\\"type\\\": \\\"touchmove\\\",\\n            \\\"consume\\\": true,\\n            \\\"filter\\\": \\\"event.touches.length===2\\\"\\n          },\\n          \\\"update\\\": \\\"pinchDistance(event)\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"xdom\\\",\\n      \\\"update\\\": \\\"xext\\\",\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": {\\\"signal\\\": \\\"delta\\\"},\\n          \\\"update\\\": \\\"[xcur[0] + span(xcur) * delta[0] / width, xcur[1] + span(xcur) * delta[0] / width]\\\"\\n        },\\n        {\\n          \\\"events\\\": {\\\"signal\\\": \\\"zoom\\\"},\\n          \\\"update\\\": \\\"[anchor[0] + (xdom[0] - anchor[0]) * zoom, anchor[0] + (xdom[1] - anchor[0]) * zoom]\\\"\\n        },\\n        {\\\"events\\\": [{\\\"source\\\": \\\"view\\\", \\\"type\\\": \\\"dblclick\\\"}], \\\"update\\\": \\\"xrange\\\"}\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"ydom\\\",\\n      \\\"update\\\": \\\"yext\\\",\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": {\\\"signal\\\": \\\"delta\\\"},\\n          \\\"update\\\": \\\"[ycur[0] + span(ycur) * delta[1] / height, ycur[1] + span(ycur) * delta[1] / height]\\\"\\n        },\\n        {\\n          \\\"events\\\": {\\\"signal\\\": \\\"zoom\\\"},\\n          \\\"update\\\": \\\"[anchor[1] + (ydom[0] - anchor[1]) * zoom, anchor[1] + (ydom[1] - anchor[1]) * zoom]\\\"\\n        },\\n        {\\\"events\\\": [{\\\"source\\\": \\\"view\\\", \\\"type\\\": \\\"dblclick\\\"}], \\\"update\\\": \\\"yrange\\\"}\\n      ]\\n    },\\n    {\\\"name\\\": \\\"size\\\", \\\"update\\\": \\\"clamp(20 / span(xdom), 1, 1000)\\\"},\\n    {\\n      \\\"name\\\": \\\"cx\\\",\\n      \\\"update\\\": \\\"width / 2\\\",\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": \\\"[symbol:mousedown, window:mouseup] > window:mousemove\\\",\\n          \\\"update\\\": \\\" cx==width/2?cx+0.001:width/2\\\"\\n        }\\n      ]\\n    },\\n    {\\\"name\\\": \\\"cy\\\", \\\"update\\\": \\\"height / 2\\\"},\\n    {\\n      \\\"name\\\": \\\"nodeRadiusKey\\\",\\n      \\\"description\\\": \\\"q=increase size, a=decrease size\\\",\\n      \\\"value\\\": 8,\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": \\\"window:keypress\\\",\\n          \\\"update\\\": \\\"event.key=='a'&&nodeRadiusKey>1?nodeRadiusKey-1:event.key=='q'?nodeRadiusKey+1:nodeRadiusKey\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"nodeRadius\\\",\\n      \\\"value\\\": 8,\\n      \\\"bind\\\": {\\\"input\\\": \\\"range\\\", \\\"min\\\": 1, \\\"max\\\": 50, \\\"step\\\": 1},\\n      \\\"on\\\": [{\\\"events\\\": {\\\"signal\\\": \\\"nodeRadiusKey\\\"}, \\\"update\\\": \\\"nodeRadiusKey\\\"}]\\n    },\\n    {\\n      \\\"name\\\": \\\"nodeCharge\\\",\\n      \\\"value\\\": -30,\\n      \\\"bind\\\": {\\\"input\\\": \\\"range\\\", \\\"min\\\": -100, \\\"max\\\": 10, \\\"step\\\": 1}\\n    },\\n    {\\n      \\\"name\\\": \\\"linkDistance\\\",\\n      \\\"value\\\": 30,\\n      \\\"bind\\\": {\\\"input\\\": \\\"range\\\", \\\"min\\\": 5, \\\"max\\\": 300, \\\"step\\\": 1}\\n    },\\n    {\\n      \\\"description\\\": \\\"State variable for active node fix status.\\\",\\n      \\\"name\\\": \\\"fix\\\",\\n      \\\"value\\\": false,\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": \\\"symbol:mouseout[!event.buttons], window:mouseup\\\",\\n          \\\"update\\\": \\\"false\\\"\\n        },\\n        {\\\"events\\\": \\\"symbol:mouseover\\\", \\\"update\\\": \\\"fix || true\\\", \\\"force\\\": true},\\n        {\\n          \\\"events\\\": \\\"[symbol:mousedown, window:mouseup] > window:mousemove!\\\",\\n          \\\"update\\\": \\\"xy()\\\",\\n          \\\"force\\\": true\\n        }\\n      ]\\n    },\\n    {\\n      \\\"description\\\": \\\"Graph node most recently interacted with.\\\",\\n      \\\"name\\\": \\\"node\\\",\\n      \\\"value\\\": null,\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": \\\"symbol:mouseover\\\",\\n          \\\"update\\\": \\\"fix === true ? datum.index : node\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"nodeHover\\\",\\n      \\\"value\\\": {\\\"id\\\": null, \\\"connections\\\": []},\\n      \\\"on\\\": [\\n        {\\n          \\\"events\\\": \\\"symbol:mouseover\\\",\\n          \\\"update\\\": \\\"{'id':datum.index, 'connections':split(datum.sources+','+datum.targets,',')}\\\"\\n        },\\n        {\\\"events\\\": \\\"symbol:mouseout\\\", \\\"update\\\": \\\"{'id':null, 'connections':[]}\\\"}\\n      ]\\n    },\\n    {\\n      \\\"description\\\": \\\"Flag to restart Force simulation upon data changes.\\\",\\n      \\\"name\\\": \\\"restart\\\",\\n      \\\"value\\\": false,\\n      \\\"on\\\": [{\\\"events\\\": {\\\"signal\\\": \\\"fix\\\"}, \\\"update\\\": \\\"fix && fix.length\\\"}]\\n    }\\n  ],\\n  \\\"data\\\": [\\n    {\\n      \\\"name\\\": \\\"node-data-raw\\\",\\n      \\\"url\\\": {\\n        \\\"%context%\\\": \\\"true\\\",\\n        \\\"index\\\": \\\"my_custom_index\\\",\\n        \\\"body\\\": {\\n          \\\"size\\\": 0,\\n          \\\"aggs\\\": {\\n            \\\"services\\\": {\\n              \\\"terms\\\": {\\n                \\\"field\\\": \\\"serviceName.keyword\\\",\\n                \\\"size\\\": 10000\\n              }\\n            }\\n          }\\n        }\\n      },\\n      \\\"format\\\": {\\n        \\\"type\\\": \\\"json\\\",\\n        \\\"property\\\": \\\"aggregations.services.buckets\\\"\\n      },\\n      \\\"transform\\\": [\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.doc_count\\\",\\n          \\\"as\\\": \\\"traceCounts\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.key\\\",\\n          \\\"as\\\": \\\"name\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.key\\\",\\n          \\\"as\\\": \\\"group\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"link-data-raw\\\",\\n      \\\"url\\\": {\\n        \\\"%context%\\\": \\\"true\\\",\\n        \\\"index\\\": \\\"my_custom_index\\\",\\n        \\\"body\\\": {\\n          \\\"size\\\": 0,\\n          \\\"aggs\\\": {\\n            \\\"services\\\": {\\n              \\\"terms\\\": {\\n                \\\"size\\\": 10000,\\n                \\\"field\\\": \\\"serviceName.keyword\\\"\\n              },\\n              \\\"aggs\\\": {\\n                \\\"target\\\": {\\n                  \\\"terms\\\": {\\n                    \\\"size\\\": 10000,\\n                    \\\"field\\\": \\\"destination.domain.keyword\\\"\\n                  }\\n                }\\n              }\\n            }\\n          }\\n        }\\n      },\\n      \\\"format\\\": {\\n        \\\"property\\\": \\\"aggregations.services.buckets\\\"\\n      },\\n      \\\"transform\\\":[\\n        {\\n          \\\"type\\\": \\\"flatten\\\",\\n          \\\"fields\\\": [\\\"target.buckets\\\"],\\n          \\\"as\\\": [\\\"targetBucket\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.doc_count\\\",\\n          \\\"as\\\": \\\"value\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.key\\\",\\n          \\\"as\\\": \\\"source\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.targetBucket.key\\\",\\n          \\\"as\\\": \\\"target\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"lookup\\\",\\n          \\\"from\\\": \\\"node-data-raw\\\",\\n          \\\"key\\\": \\\"name\\\",\\n          \\\"fields\\\": [\\\"source\\\", \\\"target\\\"],\\n          \\\"as\\\": [\\\"sourceNode\\\", \\\"targetNode\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"filter\\\",\\n          \\\"expr\\\": \\\"datum.sourceNode !== null && datum.targetNode !== null\\\"\\n        }\\n      ]\\n    },\\n    {\\\"name\\\": \\\"link-data\\\", \\\"source\\\": \\\"link-data-raw\\\"},\\n    {\\n      \\\"name\\\": \\\"source-connections\\\",\\n      \\\"source\\\": \\\"link-data-raw\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"type\\\": \\\"aggregate\\\",\\n          \\\"groupby\\\": [\\\"source\\\"],\\n          \\\"ops\\\": [\\\"values\\\"],\\n          \\\"fields\\\": [\\\"target\\\"],\\n          \\\"as\\\": [\\\"connections\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"as\\\": \\\"targets\\\",\\n          \\\"expr\\\": \\\"pluck(datum.connections, 'target')\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"target-connections\\\",\\n      \\\"source\\\": \\\"link-data-raw\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"type\\\": \\\"aggregate\\\",\\n          \\\"groupby\\\": [\\\"target\\\"],\\n          \\\"ops\\\": [\\\"values\\\"],\\n          \\\"fields\\\": [\\\"source\\\"],\\n          \\\"as\\\": [\\\"connections\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"as\\\": \\\"sources\\\",\\n          \\\"expr\\\": \\\"pluck(datum.connections, 'source')\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"node-data\\\",\\n      \\\"source\\\" :\\\"node-data-raw\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"type\\\": \\\"lookup\\\",\\n          \\\"from\\\": \\\"source-connections\\\",\\n          \\\"key\\\": \\\"source\\\",\\n          \\\"fields\\\": [\\\"name\\\"],\\n          \\\"values\\\": [\\\"targets\\\"],\\n          \\\"as\\\": [\\\"targets\\\"],\\n          \\\"default\\\": [\\\"\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"lookup\\\",\\n          \\\"from\\\": \\\"target-connections\\\",\\n          \\\"key\\\": \\\"target\\\",\\n          \\\"fields\\\": [\\\"name\\\"],\\n          \\\"values\\\": [\\\"sources\\\"],\\n          \\\"as\\\": [\\\"sources\\\"],\\n          \\\"default\\\": [\\\"\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"force\\\",\\n          \\\"iterations\\\": 300,\\n          \\\"restart\\\": {\\\"signal\\\": \\\"restart\\\"},\\n          \\\"signal\\\": \\\"force\\\",\\n          \\\"forces\\\": [\\n            {\\\"force\\\": \\\"center\\\", \\\"x\\\": {\\\"signal\\\": \\\"cx\\\"}, \\\"y\\\": {\\\"signal\\\": \\\"cy\\\"}},\\n            {\\n              \\\"force\\\": \\\"collide\\\",\\n              \\\"radius\\\": {\\\"signal\\\": \\\"sqrt(4 * nodeRadius * nodeRadius)\\\"},\\n              \\\"iterations\\\": 1,\\n              \\\"strength\\\": 0.7\\n            },\\n            {\\\"force\\\": \\\"nbody\\\", \\\"strength\\\": {\\\"signal\\\": \\\"nodeCharge\\\"}},\\n            {\\n              \\\"force\\\": \\\"link\\\",\\n              \\\"links\\\": \\\"link-data-raw\\\",\\n              \\\"distance\\\": {\\\"signal\\\": \\\"linkDistance\\\"},\\n              \\\"id\\\": \\\"name\\\"\\n            }\\n          ]\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"as\\\": \\\"fx\\\",\\n          \\\"expr\\\": \\\"fix[0]!=null && node==datum.index ?invert('xscale',fix[0]):null\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"as\\\": \\\"fy\\\",\\n          \\\"expr\\\": \\\"fix[1]!=null && node==datum.index ?invert('yscale',fix[1]):null\\\"\\n        }\\n      ]\\n    }\\n  ],\\n  \\\"scales\\\": [\\n    {\\n      \\\"name\\\": \\\"color\\\",\\n      \\\"type\\\": \\\"ordinal\\\",\\n      \\\"domain\\\": {\\\"data\\\": \\\"node-data\\\", \\\"field\\\": \\\"group\\\"},\\n      \\\"range\\\": [\\n        \\\"#4682b4\\\",\\n        \\\"#4666b4\\\",\\n        \\\"#46b494\\\",\\n        \\\"#b46746\\\",\\n        \\\"#b44662\\\",\\n        \\\"#a44fa3\\\"\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"xscale\\\",\\n      \\\"zero\\\": false,\\n      \\\"domain\\\": {\\\"signal\\\": \\\"xdom\\\"},\\n      \\\"range\\\": {\\\"signal\\\": \\\"xrange\\\"}\\n    },\\n    {\\n      \\\"name\\\": \\\"yscale\\\",\\n      \\\"zero\\\": false,\\n      \\\"domain\\\": {\\\"signal\\\": \\\"ydom\\\"},\\n      \\\"range\\\": {\\\"signal\\\": \\\"yrange\\\"}\\n    }\\n  ],\\n  \\\"marks\\\": [\\n    {\\n      \\\"type\\\": \\\"path\\\",\\n      \\\"name\\\": \\\"links\\\",\\n      \\\"from\\\": {\\\"data\\\": \\\"link-data\\\"},\\n      \\\"interactive\\\": false,\\n      \\\"encode\\\": {\\n        \\\"update\\\": {\\n          \\\"stroke\\\": {\\n            \\\"signal\\\": \\\"datum.source.index!=nodeHover.id && datum.target.index!=nodeHover.id ? '#929399':merge(hsl(scale('color', datum.source.group)), {l:0.64})\\\"\\n          },\\n          \\\"strokeWidth\\\": {\\n            \\\"signal\\\": \\\"datum.source.index!=nodeHover.id && datum.target.index!=nodeHover.id ? 0.5:2\\\"\\n          }\\n        }\\n      },\\n      \\\"transform\\\": [\\n        {\\n          \\\"type\\\": \\\"linkpath\\\",\\n          \\\"require\\\": {\\\"signal\\\": \\\"force\\\"},\\n          \\\"shape\\\": \\\"line\\\",\\n          \\\"sourceX\\\": {\\\"expr\\\": \\\"scale('xscale', datum.datum.source.x)\\\"},\\n          \\\"sourceY\\\": {\\\"expr\\\": \\\"scale('yscale', datum.datum.source.y)\\\"},\\n          \\\"targetX\\\": {\\\"expr\\\": \\\"scale('xscale', datum.datum.target.x)\\\"},\\n          \\\"targetY\\\": {\\\"expr\\\": \\\"scale('yscale', datum.datum.target.y)\\\"}\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"atan2(datum.datum.target.y - datum.datum.source.y,datum.datum.source.x - datum.datum.target.x)\\\",\\n          \\\"as\\\": \\\"angle1\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"(datum.angle1>=0?datum.angle1:(2*PI + datum.angle1)) * (360 / (2*PI))\\\",\\n          \\\"as\\\": \\\"angle2\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"(360-datum.angle2)*(PI/180)\\\",\\n          \\\"as\\\": \\\"angle3\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"(cos(datum.angle3)*(nodeRadius+5))+(scale('xscale',datum.datum.target.x))\\\",\\n          \\\"as\\\": \\\"arrowX\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"(sin(datum.angle3)*(nodeRadius+5))+(scale('yscale',datum.datum.target.y))\\\",\\n          \\\"as\\\": \\\"arrowY\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"type\\\": \\\"symbol\\\",\\n      \\\"name\\\": \\\"arrows\\\",\\n      \\\"zindex\\\": 1,\\n      \\\"from\\\": {\\\"data\\\": \\\"links\\\"},\\n      \\\"encode\\\": {\\n        \\\"update\\\": {\\n          \\\"shape\\\": {\\\"value\\\": \\\"triangle\\\"},\\n          \\\"angle\\\": {\\\"signal\\\": \\\"-datum.angle2-90\\\"},\\n          \\\"x\\\": {\\\"signal\\\": \\\"datum.arrowX\\\"},\\n          \\\"y\\\": {\\\"signal\\\": \\\"datum.arrowY\\\"},\\n          \\\"text\\\": {\\\"signal\\\": \\\"'▲'\\\"},\\n          \\\"fill\\\": {\\n            \\\"signal\\\": \\\"datum.datum.source.index!=nodeHover.id && datum.datum.target.index!=nodeHover.id ? '#929399':merge(hsl(scale('color', datum.datum.source.group)), {l:0.64})\\\"\\n          },\\n          \\\"size\\\": {\\\"signal\\\": \\\"nodeRadius==1?0:60\\\"}\\n        }\\n      }\\n    },\\n    {\\n      \\\"name\\\": \\\"nodes\\\",\\n      \\\"type\\\": \\\"symbol\\\",\\n      \\\"zindex\\\": 1,\\n      \\\"from\\\": {\\\"data\\\": \\\"node-data\\\"},\\n      \\\"encode\\\": {\\n        \\\"update\\\": {\\n          \\\"opacity\\\": {\\\"value\\\": 1},\\n          \\\"fill\\\": {\\n            \\\"signal\\\": \\\"nodeHover.id===datum.index || indexof(nodeHover.connections, datum.name)>-1 ?scale('color', datum.group):merge(hsl(scale('color', datum.group)), {l:0.64})\\\"\\n          },\\n          \\\"stroke\\\": {\\n            \\\"signal\\\": \\\"nodeHover.id===datum.index || indexof(nodeHover.connections, datum.name)>-1 ?scale('color', datum.group):merge(hsl(scale('color', datum.group)), {l:0.84})\\\"\\n          },\\n          \\\"strokeWidth\\\": {\\\"value\\\": 3},\\n          \\\"strokeOpacity\\\": {\\\"value\\\": 1},\\n          \\\"size\\\": {\\\"signal\\\": \\\"4 * nodeRadius * nodeRadius\\\"},\\n          \\\"cursor\\\": {\\\"value\\\": \\\"pointer\\\"},\\n          \\\"x\\\": {\\n            \\\"signal\\\": \\\"fix[0]!=null && node===datum.index ?fix[0]:scale('xscale', datum.x)\\\"\\n          },\\n          \\\"y\\\": {\\n            \\\"signal\\\": \\\"fix[1]!=null && node===datum.index ?fix[1]:scale('yscale', datum.y)\\\"\\n          }\\n        },\\n        \\\"hover\\\": {\\\"tooltip\\\": {\\\"signal\\\": \\\"datum.name\\\"}}\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"name\\\": \\\"labels\\\",\\n      \\\"from\\\": {\\\"data\\\": \\\"nodes\\\"},\\n      \\\"zindex\\\": 2,\\n      \\\"interactive\\\": false,\\n      \\\"enter\\\": {},\\n      \\\"encode\\\": {\\n        \\\"update\\\": {\\n          \\\"fill\\\": {\\\"signal\\\": \\\"'white'\\\"},\\n          \\\"y\\\": {\\\"field\\\": \\\"y\\\"},\\n          \\\"x\\\": {\\\"field\\\": \\\"x\\\"},\\n          \\\"text\\\": {\\\"field\\\": \\\"datum.name\\\"},\\n          \\\"align\\\": {\\\"value\\\": \\\"center\\\"},\\n          \\\"fontSize\\\": {\\\"value\\\": 10},\\n          \\\"baseline\\\": {\\\"value\\\": \\\"middle\\\"},\\n          \\\"limit\\\": {\\n            \\\"signal\\\": \\\"clamp(sqrt(4 * nodeRadius * nodeRadius)-7,1,1000)\\\"\\n          },\\n          \\\"ellipsis\\\": {\\\"value\\\": \\\" \\\"}\\n        }\\n      }\\n    }\\n  ]\\n}\"}}"},"id":"4d02f7b0-b026-11ee-ad69-f335a07fe19a","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2024-01-16T20:03:23.484Z","version":"WzYxNSwzXQ=="}
{"exportedCount":1,"missingRefCount":0,"missingReferences":[]}